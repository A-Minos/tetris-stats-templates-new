<script lang="ts" setup>
import type { RadarSeriesOption } from 'echarts/charts'
import { RadarChart } from 'echarts/charts'
import type { ComposeOption } from 'echarts/core'
import { use } from 'echarts/core'
import { SVGRenderer } from 'echarts/renderers'
import chart from 'vue-echarts'

const data = useData<{
	readonly multiplayer: {
		readonly app: number
		readonly ci: number
		readonly dspp: number
		readonly or: number
		readonly ge: number
		readonly pps: number
	}
}>()

use([
	SVGRenderer,
	RadarChart
])

type ChartOption = ComposeOption<RadarSeriesOption>

const option = computed<ChartOption>(() => {
	return {
		animation: false,
		radar: [
			{
				indicator: [
					{
						name: 'APP',
						nameRotate: 0
					},
					{
						name: 'CI',
						nameRotate: 60
					},
					{
						name: 'DSPP',
						nameRotate: -60
					},
					{
						name: 'OR',
						nameRotate: 0
					},
					{
						name: 'GE',
						nameRotate: 60
					},
					{
						name: 'PPS',
						nameRotate: 300
					}
				],
				center: ['50%', '50%'],
				radius: '65%',
				startAngle: 90,
				splitNumber: 4,
				shape: 'circle',
				silent: true,
				axisName: {
					color: '#fafafa',
					fontFamily: 'CabinetGrotesk-Variable',
					fontSize: 15,
					fontWeight: '800'
				},
				splitArea: {
					show: false
				},
				axisLine: {
					lineStyle: {
						color: '#fafafa4d'
					}
				},
				axisLabel: {
					show: true,
					rotate: 0,
					margin: -1,
					fontFamily: 'CabinetGrotesk-Variable',
					fontSize: 7,
					fontWeight: '800',
					color: 'white'
				},
				splitLine: {
					lineStyle: {
						color: '#fafafa4d'
					}
				}
			}
		],
		series: [
			{
				type: 'radar',
				symbol: 'none',
				label: {
					show: true
				},
				emphasis: {
					disabled: true
				},
				lineStyle: {
					color: '#fafafa',
					width: 2.5,
					shadowBlur: 20,
					shadowColor: '#fafafa'
				},
				areaStyle: {
					color: '#fafafa73'
				},
				data: [
					{
						value: [
							data.multiplayer.app,
							data.multiplayer.ci,
							data.multiplayer.dspp,
							data.multiplayer.or,
							data.multiplayer.ge,
							data.multiplayer.pps
						]
					}
				]
			}
		]
	}
})

const valid = ref(false)

onMounted(() => {
	valid.value = true
})
</script>

<template>
	<template v-if="valid">
		<div class="size-68.75 rounded-7.5"
			 style="background: linear-gradient(222deg, #525252 11.97%, #1d1916 89.73%), linear-gradient(222deg, #4f9dff 11.97%, #2563ea 89.73%);box-shadow: 0 0.9375rem 1.875rem 0 #0000004d;filter: drop-shadow(0 0 1.9375rem #fafafa66);">
			<chart :option="option"/>
		</div>
	</template>
</template>